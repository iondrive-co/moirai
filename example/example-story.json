[
  {
    "key": "current-story",
    "value": {
      "intro": {
        "startingStep": "opening_description",
        "steps": {
          "opening_description": {
            "type": "description",
            "text": "You find yourself in a dimly lit tavern, nursing your drink at the bar.",
            "next": "notice_stranger"
          },
          "notice_stranger": {
            "type": "description",
            "text": "From the corner of your eye, you notice a hooded figure at a corner table. They seem to be watching you.",
            "next": "first_choice"
          },
          "first_choice": {
            "type": "choice",
            "choices": [
              {
                "text": "Approach their table and ask who they are",
                "next": "direct_approach",
                "setVariables": [
                  {
                    "variableName": "approach",
                    "operator": "==",
                    "value": "direct"
                  }
                ],
                "isDialogue": false,
                "historyIsDialogue": false
              },
              {
                "text": "Stay at the bar and observe them back",
                "next": "patient_approach",
                "setVariables": [
                  {
                    "variableName": "approach",
                    "operator": "==",
                    "value": "patient"
                  }
                ],
                "isDialogue": false,
                "historyIsDialogue": false
              }
            ]
          },
          "direct_approach": {
            "type": "description",
            "text": "You stand up decisively and walk over to their table.",
            "next": "stranger_reaction"
          },
          "patient_approach": {
            "type": "description",
            "text": "You pretend to focus on your drink while watching their reflection in the mirror behind the bar. After a few minutes, they stand and approach you.",
            "next": "stranger_reaction"
          },
          "stranger_reaction": {
            "type": "description",
            "text": "The stranger sits across from you",
            "conditionalTexts": [
              {
                "condition": {
                  "variableName": "approach",
                  "operator": "==",
                  "value": "direct"
                },
                "text": ", seeming pleased by your directness"
              },
              {
                "condition": {
                  "variableName": "approach",
                  "operator": "==",
                  "value": "patient"
                },
                "text": ". \"Your caution is admirable,\" they say softly"
              }
            ],
            "next": "stranger_explanation"
          },
          "stranger_explanation": {
            "type": "dialogue",
            "speaker": "Stranger",
            "text": "I need someone with your particular skills.",
            "next": "help_choice"
          },
          "help_choice": {
            "type": "choice",
            "choices": [
              {
                "text": "What skills would those be?",
                "next": "skill_response",
                "setVariables": [
                  {
                    "variableName": "interest",
                    "operator": "==",
                    "value": true
                  }
                ],
                "isDialogue": true,
                "historyIsDialogue": true
              },
              {
                "text": "I'm not interested in mysterious offers.",
                "next": "departure_scene",
                "setVariables": [
                  {
                    "variableName": "interest",
                    "operator": "==",
                    "value": false
                  }
                ],
                "isDialogue": true,
                "historyIsDialogue": true
              }
            ]
          },
          "skill_response": {
            "type": "description",
            "text": "The stranger reaches into their cloak",
            "conditionalTexts": [
              {
                "condition": {
                  "variableName": "approach",
                  "operator": "==",
                  "value": "direct"
                },
                "text": ", matching your straightforward demeanor"
              },
              {
                "condition": {
                  "variableName": "approach",
                  "operator": "==",
                  "value": "patient"
                },
                "text": ", showing careful, deliberate movements"
              }
            ],
            "next": "reveal_artifact"
          },
          "reveal_artifact": {
            "type": "dialogue",
            "speaker": "Stranger",
            "text": "This crystal holds immense power. I need someone to help me protect it.",
            "next": "departure_scene"
          },
          "departure_scene": {
            "type": "description",
            "text": "You stand",
            "conditionalTexts": [
              {
                "condition": {
                  "variableName": "interest",
                  "operator": "==",
                  "value": true
                },
                "text": ", intrigued by the stranger's offer and the mysterious crystal. \"Let's discuss this somewhere more private,\" they suggest quietly"
              },
              {
                "condition": {
                  "variableName": "interest",
                  "operator": "==",
                  "value": false
                },
                "text": ", making it clear you want nothing to do with this. \"Wait-\" the stranger starts to say, but you're already moving toward the door"
              }
            ],
            "next": "leave_tavern"
          },
          "leave_tavern": {
            "type": "description",
            "text": "You make your way through the crowded tavern",
            "conditionalTexts": [
              {
                "condition": {
                  "variableName": "interest",
                  "operator": "==",
                  "value": true
                },
                "text": ", the stranger following close behind as you head for the exit"
              },
              {
                "condition": {
                  "variableName": "interest",
                  "operator": "==",
                  "value": false
                },
                "text": ", weaving between patrons to put as much distance as possible between you and the stranger"
              }
            ],
            "next": "exit_transition"
          },
          "exit_transition": {
            "type": "sceneTransition",
            "text": "Step outside",
            "nextScene": "outside_tavern"
          }
        }
      },
      "outside_tavern": {
        "startingStep": "outside_description",
        "steps": {
          "outside_description": {
            "type": "description",
            "text": "The cold night air hits you as you step outside",
            "conditionalTexts": [
              {
                "condition": {
                  "variableName": "interest",
                  "operator": "==",
                  "value": true
                },
                "text": ". The streets are empty save for a few guards on patrol, and you hear the tavern door open behind you as the stranger follows"
              },
              {
                "condition": {
                  "variableName": "interest",
                  "operator": "==",
                  "value": false
                },
                "text": ". The streets are empty save for a few guards on patrol, but you hear rapid footsteps approaching from behind"
              }
            ],
            "next": "street_choice"
          },
          "street_choice": {
            "type": "choice",
            "choices": [
              {
                "text": "Turn and face whoever is behind you",
                "next": "face_follower",
                "isDialogue": false,
                "historyIsDialogue": false
              },
              {
                "text": "Start running",
                "next": "run_away",
                "isDialogue": false,
                "historyIsDialogue": false
              }
            ]
          },
          "face_follower": {
            "type": "description",
            "text": "You turn",
            "conditionalTexts": [
              {
                "condition": {
                  "variableName": "interest",
                  "operator": "==",
                  "value": true
                },
                "text": " to see the stranger, their expression grave but respectful"
              },
              {
                "condition": {
                  "variableName": "interest",
                  "operator": "==",
                  "value": false
                },
                "text": " to find the stranger looking somewhat desperate"
              }
            ],
            "next": "final_choice"
          },
          "run_away": {
            "type": "description",
            "text": "You break into a sprint",
            "conditionalTexts": [
              {
                "condition": {
                  "variableName": "approach",
                  "operator": "==",
                  "value": "direct"
                },
                "text": ", surprising yourself with this uncharacteristically cautious reaction"
              },
              {
                "condition": {
                  "variableName": "approach",
                  "operator": "==",
                  "value": "patient"
                },
                "text": ", your earlier caution proving well-founded"
              }
            ],
            "next": "chase_scene"
          },
          "final_choice": {
            "type": "choice",
            "choices": [
              {
                "text": "Let's hear what you have to say.",
                "next": "continue_story",
                "isDialogue": true,
                "historyIsDialogue": true
              },
              {
                "text": "Leave me alone.",
                "next": "end_conversation",
                "isDialogue": true,
                "historyIsDialogue": true
              }
            ]
          },
          "chase_scene": {
            "type": "sceneTransition",
            "text": "Continue running into the night",
            "nextScene": "chase"
          },
          "continue_story": {
            "type": "sceneTransition",
            "text": "Follow the stranger to hear more",
            "nextScene": "next_chapter"
          },
          "end_conversation": {
            "type": "sceneTransition",
            "text": "Walk away into the night",
            "nextScene": "ending"
          }
        }
      }
    }
  }
]