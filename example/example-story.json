[
  {
    "key": "current-story",
    "value": {
      "intro": {
        "startingStep": "opening_description",
        "steps": {
          "first_choice": {
            "type": "choice",
            "choices": [
              {
                "text": "Who are you?",
                "next": "mysterious_response",
                "setVariables": [
                  {
                    "variableName": "trustLevel",
                    "operator": "==",
                    "value": 1
                  }
                ],
                "isDialogue": true,
                "historyIsDialogue": true
              },
              {
                "text": "I noticed you watching me.",
                "next": "perceptive_response",
                "setVariables": [
                  {
                    "variableName": "trustLevel",
                    "operator": "==",
                    "value": 2
                  }
                ],
                "isDialogue": true,
                "historyIsDialogue": true
              }
            ]
          },
          "mysterious_response": {
            "type": "dialogue",
            "speaker": "Stranger",
            "text": "Someone who knows more than they should. And someone who needs your help.",
            "next": "lean_forward"
          },
          "perceptive_response": {
            "type": "dialogue",
            "speaker": "Stranger",
            "text": "Perceptive. Yes, I've been watching. Waiting for the right moment.",
            "next": "lean_forward"
          },
          "lean_forward": {
            "type": "description",
            "text": "The stranger leans forward, their hood casting deep shadows across their face.",
            "conditionalBranches": [
              {
                "condition": {
                  "variableName": "trustLevel",
                  "operator": "==",
                  "value": 2
                },
                "next": "high_trust_response"
              },
              {
                "condition": {
                  "variableName": "trustLevel",
                  "operator": "==",
                  "value": 1
                },
                "next": "low_trust_response"
              }
            ]
          },
          "high_trust_response": {
            "type": "dialogue",
            "speaker": "Stranger",
            "text": "Your keen eye serves you well. Let me be direct with you then.",
            "next": "help_choice"
          },
          "low_trust_response": {
            "type": "dialogue",
            "speaker": "Stranger",
            "text": "Perhaps I should explain myself more carefully...",
            "next": "help_choice"
          },
          "help_choice": {
            "type": "choice",
            "choices": [
              {
                "text": "What kind of help?",
                "next": "help_explanation",
                "setVariables": [
                  {
                    "variableName": "helpfulness",
                    "operator": "==",
                    "value": true
                  }
                ],
                "isDialogue": true,
                "historyIsDialogue": true
              },
              {
                "text": "I'm not interested.",
                "next": "leave_option",
                "setVariables": [
                  {
                    "variableName": "helpfulness",
                    "operator": "==",
                    "value": false
                  }
                ],
                "isDialogue": true,
                "historyIsDialogue": true
              }
            ]
          },
          "help_explanation": {
            "type": "description",
            "text": "The stranger's expression changes as they consider how much to reveal.",
            "conditionalBranches": [
              {
                "condition": {
                  "variableName": "trustLevel",
                  "operator": "==",
                  "value": 2
                },
                "next": "full_explanation"
              },
              {
                "condition": {
                  "variableName": "trustLevel",
                  "operator": "==",
                  "value": 1
                },
                "next": "partial_explanation"
              }
            ]
          },
          "full_explanation": {
            "type": "dialogue",
            "speaker": "Stranger",
            "text": "The artifact is an ancient crystal, said to hold the power of a thousand suns. If it falls into the wrong hands, the consequences would be catastrophic.",
            "next": "leave_option"
          },
          "partial_explanation": {
            "type": "dialogue",
            "speaker": "Stranger",
            "text": "There's an artifact of great power that needs to be protected. I believe you have the skills necessary to help me guard it.",
            "next": "leave_option"
          },
          "leave_option": {
            "type": "description",
            "text": "You consider the stranger's words carefully.",
            "conditionalBranches": [
              {
                "condition": {
                  "variableName": "helpfulness",
                  "operator": "==",
                  "value": true
                },
                "next": "positive_departure"
              },
              {
                "condition": {
                  "variableName": "helpfulness",
                  "operator": "==",
                  "value": false
                },
                "next": "negative_departure"
              }
            ]
          },
          "positive_departure": {
            "type": "sceneTransition",
            "text": "Follow the stranger out of the tavern",
            "nextScene": "outside_tavern"
          },
          "negative_departure": {
            "type": "sceneTransition",
            "text": "Leave the tavern alone",
            "nextScene": "outside_tavern"
          },
          "stranger_initial_talk": {
            "type": "dialogue",
            "speaker": "Stranger",
            "text": "I've been waiting for someone like you.",
            "next": "first_choice"
          },
          "opening_description": {
            "type": "description",
            "text": "You find yourself in a dimly lit tavern. At the corner table sits a hooded figure who seems to be watching you.",
            "next": "stranger_initial_talk"
          }
        },
        "nodePositions": {
          "opening_description": {
            "x": -462.7607385811469,
            "y": 49.63809523809499
          },
          "stranger_initial_talk": {
            "x": -450.63168124392627,
            "y": 274.43576287657913
          },
          "first_choice": {
            "x": -428.4155490767736,
            "y": 521.2104956268222
          },
          "mysterious_response": {
            "x": -74.52789115646263,
            "y": 237.33138969873661
          },
          "perceptive_response": {
            "x": 5.567735665694741,
            "y": 47.406180758017484
          },
          "lean_forward": {
            "x": 436.1908649173956,
            "y": 71.88493683187559
          },
          "high_trust_response": {
            "x": 396.6826044703596,
            "y": 318.2977648202138
          },
          "low_trust_response": {
            "x": 759.2163265306122,
            "y": 313.97473275024294
          },
          "help_choice": {
            "x": 27.58509623257882,
            "y": 528.7536936480548
          },
          "help_explanation": {
            "x": 539.6255180522855,
            "y": 549.8090336056122
          },
          "partial_explanation": {
            "x": 800.5133936143388,
            "y": 907.8108182814984
          },
          "full_explanation": {
            "x": 910.5165588261127,
            "y": 587.5581668182475
          },
          "leave_option": {
            "x": -1.4465254443302626,
            "y": 770.1106416997455
          },
          "positive_departure": {
            "x": 204.12815768939802,
            "y": 983.6245644586863
          },
          "negative_departure": {
            "x": -113.9197517360964,
            "y": 983.8055313687325
          }
        }
      },
      "outside_tavern": {
        "startingStep": "initial_description",
        "steps": {
          "initial_description": {
            "type": "description",
            "text": "The cold night air hits you as you step outside. The streets are empty save for a few guards on patrol.",
            "next": "footsteps"
          },
          "footsteps": {
            "type": "description",
            "text": "You hear footsteps behind you.",
            "next": "turn_choice"
          },
          "turn_choice": {
            "type": "choice",
            "choices": [
              {
                "text": "Turn around slowly",
                "historyText": "You turn around slowly, cautiously facing the direction of the footsteps.",
                "isAction": true,
                "next": "face_follower",
                "requires": {
                  "trustLevel": 2
                },
                "isDialogue": false,
                "historyIsDialogue": false
              },
              {
                "text": "Start running",
                "historyText": "Without hesitation, you break into a sprint.",
                "isAction": true,
                "next": "run_away",
                "isDialogue": false,
                "historyIsDialogue": false
              }
            ]
          },
          "face_follower": {
            "type": "dialogue",
            "speaker": "Stranger",
            "text": "Wait! There's something you need to know!",
            "next": "end_choice"
          },
          "run_away": {
            "type": "description",
            "text": "You break into a sprint, your footsteps echoing off the cobblestones.",
            "next": "end_chase"
          },
          "end_choice": {
            "type": "choice",
            "choices": [
              {
                "text": "I'm listening",
                "next": "reveal_secret",
                "isDialogue": true,
                "historyIsDialogue": true
              },
              {
                "text": "Keep walking",
                "next": "walk_away",
                "isDialogue": true,
                "historyIsDialogue": true
              }
            ]
          },
          "end_chase": {
            "type": "sceneTransition",
            "text": "Continue running",
            "nextScene": "chase_scene"
          },
          "walk_away": {
            "type": "sceneTransition",
            "text": "Walk away",
            "nextScene": "end_conversation"
          },
          "reveal_secret": {
            "type": "sceneTransition",
            "text": "Listen to the secret",
            "nextScene": "secret_scene"
          }
        }
      }
    }
  }
]